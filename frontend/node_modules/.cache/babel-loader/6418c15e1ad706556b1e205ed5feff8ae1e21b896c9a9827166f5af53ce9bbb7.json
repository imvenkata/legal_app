{"ast":null,"code":"var _jsxFileName = \"/Users/venkata/startup/legal_app/frontend/src/components/DocumentAnalysis.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Typography, Paper, Button, Box, TextField, CircularProgress, Card, CardContent, Divider, List, ListItem, ListItemText, Chip, Alert, Snackbar, Container, LinearProgress, Grid, Tab, Tabs, IconButton, Avatar } from '@mui/material';\nimport SendIcon from '@mui/icons-material/Send';\nimport AnalyticsIcon from '@mui/icons-material/Analytics';\nimport ChatIcon from '@mui/icons-material/Chat';\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload';\nimport DescriptionIcon from '@mui/icons-material/Description';\nimport { documentsAPI } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DocumentAnalysis = () => {\n  _s();\n  // File upload states\n  const [file, setFile] = useState(null);\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [isUploading, setIsUploading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Document analysis states\n  const [document, setDocument] = useState(null);\n  const [analysis, setAnalysis] = useState(null);\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n\n  // Chat states\n  const [activeTab, setActiveTab] = useState(0);\n  const [chatMessages, setChatMessages] = useState([]);\n  const [chatInput, setChatInput] = useState('');\n  const [isSubmittingChat, setIsSubmittingChat] = useState(false);\n  const chatEndRef = useRef(null);\n  const fileInputRef = useRef(null);\n\n  // Scroll to bottom of chat when messages change\n  useEffect(() => {\n    if (chatEndRef.current) {\n      chatEndRef.current.scrollIntoView({\n        behavior: 'smooth'\n      });\n    }\n  }, [chatMessages]);\n  const handleTabChange = (event, newValue) => {\n    setActiveTab(newValue);\n  };\n  const handleFileChange = event => {\n    const selectedFile = event.target.files[0];\n    if (selectedFile) {\n      setFile(selectedFile);\n      setError(null);\n      // Set default title from filename\n      setTitle(selectedFile.name.split('.')[0]);\n    }\n  };\n  const handleUpload = async () => {\n    if (!file) {\n      setError('Please select a file');\n      return;\n    }\n    setIsUploading(true);\n    setUploadProgress(0);\n    setError(null);\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('title', title);\n      formData.append('description', description);\n      const response = await documentsAPI.upload(formData);\n      setDocument(response.data);\n      setIsUploading(false);\n      setUploadProgress(0);\n\n      // Auto-analyze after upload\n      analyzeDocument(response.data.id);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Upload error:', err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || 'Upload failed');\n      setIsUploading(false);\n      setUploadProgress(0);\n    }\n  };\n  const analyzeDocument = async documentId => {\n    setIsAnalyzing(true);\n    setError(null);\n    try {\n      const response = await documentsAPI.analyze(documentId || document.id, {\n        model: \"colpali\"\n      });\n      setAnalysis(response.data);\n      setActiveTab(0); // Switch to analysis tab\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error('Analysis error:', err);\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.detail) || 'Analysis failed');\n    } finally {\n      setIsAnalyzing(false);\n    }\n  };\n  const handleSubmitChat = async () => {\n    if (!chatInput.trim() || !(document !== null && document !== void 0 && document.id)) return;\n    const userQuestion = chatInput.trim();\n    setChatInput('');\n    setIsSubmittingChat(true);\n\n    // Add user message immediately for better UX\n    setChatMessages(prev => [...prev, {\n      role: 'user',\n      content: userQuestion\n    }]);\n    try {\n      const response = await documentsAPI.chat(document.id, {\n        query: userQuestion,\n        model: \"colpali\"\n      });\n\n      // Update with full chat history from server\n      setChatMessages(response.data.messages);\n    } catch (err) {\n      console.error('Chat error:', err);\n      setError('Failed to get response. Please try again.');\n\n      // Add error message to chat\n      setChatMessages(prev => [...prev, {\n        role: 'assistant',\n        content: 'Sorry, I encountered an error processing your question. Please try again.'\n      }]);\n    } finally {\n      setIsSubmittingChat(false);\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmitChat();\n    }\n  };\n  const handleCloseError = () => {\n    setError(null);\n  };\n\n  // Update documentsAPI to include chat function\n  if (!documentsAPI.chat) {\n    documentsAPI.chat = (id, data) => {\n      return fetch(`${process.env.REACT_APP_API_URL || 'http://localhost:8000'}/documents/${id}/chat`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      }).then(res => {\n        if (!res.ok) throw new Error('Chat request failed');\n        return res.json().then(data => ({\n          data\n        }));\n      });\n    };\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"lg\",\n    children: [/*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        p: 3,\n        mt: 4,\n        mb: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        gutterBottom: true,\n        children: \"Document Analysis with ColPali\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"subtitle2\",\n        color: \"text.secondary\",\n        paragraph: true,\n        children: \"Powered by ColPali Vision Language Model for efficient document retrieval and analysis\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), !document ?\n      /*#__PURE__*/\n      // Upload form\n      _jsxDEV(Box, {\n        sx: {\n          mb: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Document Title\",\n          value: title,\n          onChange: e => setTitle(e.target.value),\n          margin: \"normal\",\n          disabled: isUploading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Description (optional)\",\n          value: description,\n          onChange: e => setDescription(e.target.value),\n          margin: \"normal\",\n          multiline: true,\n          rows: 2,\n          disabled: isUploading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            ref: fileInputRef,\n            accept: \".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png\",\n            style: {\n              display: 'none'\n            },\n            id: \"file-upload\",\n            type: \"file\",\n            onChange: handleFileChange,\n            disabled: isUploading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            component: \"label\",\n            htmlFor: \"file-upload\",\n            startIcon: /*#__PURE__*/_jsxDEV(CloudUploadIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 28\n            }, this),\n            disabled: isUploading,\n            children: \"Select File\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 15\n          }, this), file && /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            sx: {\n              mt: 1\n            },\n            children: [\"Selected: \", file.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 13\n        }, this), isUploading && /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(LinearProgress, {\n            variant: \"determinate\",\n            value: uploadProgress\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"text.secondary\",\n            sx: {\n              mt: 1\n            },\n            children: [\"Uploading: \", uploadProgress, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 2\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            onClick: handleUpload,\n            disabled: !file || isUploading,\n            startIcon: isUploading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 42\n            }, this) : /*#__PURE__*/_jsxDEV(DescriptionIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 75\n            }, this),\n            children: isUploading ? 'Uploading...' : 'Upload & Analyze'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }, this) :\n      /*#__PURE__*/\n      // Document analysis and chat\n      _jsxDEV(Box, {\n        sx: {\n          mt: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            borderBottom: 1,\n            borderColor: 'divider',\n            mb: 2\n          },\n          children: /*#__PURE__*/_jsxDEV(Tabs, {\n            value: activeTab,\n            onChange: handleTabChange,\n            \"aria-label\": \"document tabs\",\n            children: [/*#__PURE__*/_jsxDEV(Tab, {\n              icon: /*#__PURE__*/_jsxDEV(AnalyticsIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 28\n              }, this),\n              label: \"Analysis\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Tab, {\n              icon: /*#__PURE__*/_jsxDEV(ChatIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 28\n              }, this),\n              label: \"Chat with Document\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 13\n        }, this), activeTab === 0 && /*#__PURE__*/_jsxDEV(Box, {\n          children: isAnalyzing ? /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center',\n              p: 3\n            },\n            children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n              size: 40\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              sx: {\n                mt: 2\n              },\n              children: \"Analyzing document with ColPali Vision Language Model...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 19\n          }, this) : analysis ? /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 3,\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                children: \"Document Summary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Paper, {\n                elevation: 0,\n                variant: \"outlined\",\n                sx: {\n                  p: 2,\n                  mt: 1\n                },\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body1\",\n                  children: analysis.summary\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              md: 6,\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                children: \"Key Points\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Paper, {\n                elevation: 0,\n                variant: \"outlined\",\n                sx: {\n                  p: 2,\n                  mt: 1\n                },\n                children: analysis.key_points && analysis.key_points.length > 0 ? /*#__PURE__*/_jsxDEV(List, {\n                  dense: true,\n                  children: analysis.key_points.map((point, index) => /*#__PURE__*/_jsxDEV(ListItem, {\n                    children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                      primary: point\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 299,\n                      columnNumber: 33\n                    }, this)\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 298,\n                    columnNumber: 31\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 27\n                }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  color: \"text.secondary\",\n                  children: \"No key points identified\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              md: 6,\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                children: \"Potential Risks\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Paper, {\n                elevation: 0,\n                variant: \"outlined\",\n                sx: {\n                  p: 2,\n                  mt: 1\n                },\n                children: analysis.risks && analysis.risks.length > 0 ? /*#__PURE__*/_jsxDEV(List, {\n                  dense: true,\n                  children: analysis.risks.map((risk, index) => /*#__PURE__*/_jsxDEV(ListItem, {\n                    children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                      primary: risk\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 318,\n                      columnNumber: 33\n                    }, this)\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 317,\n                    columnNumber: 31\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 315,\n                  columnNumber: 27\n                }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  color: \"text.secondary\",\n                  children: \"No risks identified\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                children: \"Key Entities\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Paper, {\n                elevation: 0,\n                variant: \"outlined\",\n                sx: {\n                  p: 2,\n                  mt: 1\n                },\n                children: analysis.entities && analysis.entities.length > 0 ? /*#__PURE__*/_jsxDEV(Grid, {\n                  container: true,\n                  spacing: 1,\n                  children: analysis.entities.map((entity, index) => /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    children: /*#__PURE__*/_jsxDEV(Chip, {\n                      label: `${entity.name} (${entity.type})`,\n                      variant: \"outlined\",\n                      color: entity.type === 'person' ? 'primary' : entity.type === 'organization' ? 'secondary' : 'default'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 337,\n                      columnNumber: 33\n                    }, this)\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 336,\n                    columnNumber: 31\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 27\n                }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  color: \"text.secondary\",\n                  children: \"No entities identified\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'center',\n              p: 3\n            },\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              onClick: () => analyzeDocument(),\n              disabled: isAnalyzing,\n              startIcon: isAnalyzing ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 48\n              }, this) : /*#__PURE__*/_jsxDEV(AnalyticsIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 81\n              }, this),\n              children: isAnalyzing ? 'Analyzing...' : 'Analyze Document'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 15\n        }, this), activeTab === 1 && /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            flexDirection: 'column',\n            height: '60vh'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Paper, {\n            elevation: 0,\n            variant: \"outlined\",\n            sx: {\n              p: 2,\n              flexGrow: 1,\n              overflow: 'auto',\n              backgroundColor: '#f5f5f5',\n              mb: 2\n            },\n            children: [chatMessages.length === 0 ? /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                justifyContent: 'center',\n                height: '100%'\n              },\n              children: [/*#__PURE__*/_jsxDEV(ChatIcon, {\n                sx: {\n                  fontSize: 60,\n                  color: 'text.secondary',\n                  mb: 2\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body1\",\n                color: \"text.secondary\",\n                children: \"Ask questions about the document\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                color: \"text.secondary\",\n                sx: {\n                  mt: 1,\n                  textAlign: 'center',\n                  maxWidth: '70%'\n                },\n                children: \"ColPali will identify relevant information in the document to answer your questions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 21\n            }, this) : chatMessages.map((msg, index) => /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                justifyContent: msg.role === 'user' ? 'flex-end' : 'flex-start',\n                mb: 2\n              },\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  maxWidth: '75%'\n                },\n                children: [msg.role !== 'user' && /*#__PURE__*/_jsxDEV(Avatar, {\n                  sx: {\n                    bgcolor: 'primary.main',\n                    mr: 1\n                  },\n                  children: \"AI\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 413,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(Paper, {\n                  elevation: 1,\n                  sx: {\n                    p: 2,\n                    backgroundColor: msg.role === 'user' ? 'primary.main' : 'background.paper',\n                    color: msg.role === 'user' ? 'white' : 'text.primary',\n                    borderRadius: 2\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    style: {\n                      whiteSpace: 'pre-line'\n                    },\n                    children: msg.content\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 424,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 415,\n                  columnNumber: 27\n                }, this), msg.role === 'user' && /*#__PURE__*/_jsxDEV(Avatar, {\n                  sx: {\n                    bgcolor: 'secondary.main',\n                    ml: 1\n                  },\n                  children: \"U\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 427,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 25\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 23\n            }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: chatEndRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex'\n            },\n            children: [/*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              variant: \"outlined\",\n              placeholder: \"Ask a question about the document...\",\n              value: chatInput,\n              onChange: e => setChatInput(e.target.value),\n              onKeyPress: handleKeyPress,\n              disabled: isSubmittingChat,\n              sx: {\n                mr: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 437,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              onClick: handleSubmitChat,\n              disabled: !chatInput.trim() || isSubmittingChat,\n              startIcon: isSubmittingChat ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 51\n              }, this) : /*#__PURE__*/_jsxDEV(SendIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 84\n              }, this),\n              children: \"Send\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: !!error,\n      autoHideDuration: 6000,\n      onClose: handleCloseError,\n      anchorOrigin: {\n        vertical: 'top',\n        horizontal: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: handleCloseError,\n        severity: \"error\",\n        sx: {\n          width: '100%'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 187,\n    columnNumber: 5\n  }, this);\n};\n_s(DocumentAnalysis, \"RCYaDtNU03UVhqVgq+SyAMH6uPg=\");\n_c = DocumentAnalysis;\nexport default DocumentAnalysis;\nvar _c;\n$RefreshReg$(_c, \"DocumentAnalysis\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Typography","Paper","Button","Box","TextField","CircularProgress","Card","CardContent","Divider","List","ListItem","ListItemText","Chip","Alert","Snackbar","Container","LinearProgress","Grid","Tab","Tabs","IconButton","Avatar","SendIcon","AnalyticsIcon","ChatIcon","CloudUploadIcon","DescriptionIcon","documentsAPI","jsxDEV","_jsxDEV","DocumentAnalysis","_s","file","setFile","title","setTitle","description","setDescription","uploadProgress","setUploadProgress","isUploading","setIsUploading","error","setError","document","setDocument","analysis","setAnalysis","isAnalyzing","setIsAnalyzing","activeTab","setActiveTab","chatMessages","setChatMessages","chatInput","setChatInput","isSubmittingChat","setIsSubmittingChat","chatEndRef","fileInputRef","current","scrollIntoView","behavior","handleTabChange","event","newValue","handleFileChange","selectedFile","target","files","name","split","handleUpload","formData","FormData","append","response","upload","data","analyzeDocument","id","err","_err$response","_err$response$data","console","detail","documentId","analyze","model","_err$response2","_err$response2$data","handleSubmitChat","trim","userQuestion","prev","role","content","chat","query","messages","handleKeyPress","e","key","shiftKey","preventDefault","handleCloseError","fetch","process","env","REACT_APP_API_URL","method","headers","body","JSON","stringify","then","res","ok","Error","json","maxWidth","children","sx","p","mt","mb","variant","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","color","paragraph","fullWidth","label","value","onChange","margin","disabled","multiline","rows","ref","accept","style","display","type","component","htmlFor","startIcon","onClick","size","borderBottom","borderColor","icon","flexDirection","alignItems","container","spacing","item","xs","elevation","summary","md","key_points","length","dense","map","point","index","primary","risks","risk","entities","entity","justifyContent","height","flexGrow","overflow","backgroundColor","fontSize","textAlign","msg","bgcolor","mr","borderRadius","whiteSpace","ml","placeholder","onKeyPress","open","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","severity","width","_c","$RefreshReg$"],"sources":["/Users/venkata/startup/legal_app/frontend/src/components/DocumentAnalysis.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { \n  Typography, \n  Paper, \n  Button, \n  Box, \n  TextField, \n  CircularProgress,\n  Card,\n  CardContent,\n  Divider,\n  List,\n  ListItem,\n  ListItemText,\n  Chip,\n  Alert,\n  Snackbar,\n  Container,\n  LinearProgress,\n  Grid,\n  Tab,\n  Tabs,\n  IconButton,\n  Avatar\n} from '@mui/material';\nimport SendIcon from '@mui/icons-material/Send';\nimport AnalyticsIcon from '@mui/icons-material/Analytics';\nimport ChatIcon from '@mui/icons-material/Chat';\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload';\nimport DescriptionIcon from '@mui/icons-material/Description';\nimport { documentsAPI } from '../services/api';\n\nconst DocumentAnalysis = () => {\n  // File upload states\n  const [file, setFile] = useState(null);\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [isUploading, setIsUploading] = useState(false);\n  const [error, setError] = useState(null);\n  \n  // Document analysis states\n  const [document, setDocument] = useState(null);\n  const [analysis, setAnalysis] = useState(null);\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  \n  // Chat states\n  const [activeTab, setActiveTab] = useState(0);\n  const [chatMessages, setChatMessages] = useState([]);\n  const [chatInput, setChatInput] = useState('');\n  const [isSubmittingChat, setIsSubmittingChat] = useState(false);\n  \n  const chatEndRef = useRef(null);\n  const fileInputRef = useRef(null);\n\n  // Scroll to bottom of chat when messages change\n  useEffect(() => {\n    if (chatEndRef.current) {\n      chatEndRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  }, [chatMessages]);\n\n  const handleTabChange = (event, newValue) => {\n    setActiveTab(newValue);\n  };\n\n  const handleFileChange = (event) => {\n    const selectedFile = event.target.files[0];\n    if (selectedFile) {\n      setFile(selectedFile);\n      setError(null);\n      // Set default title from filename\n      setTitle(selectedFile.name.split('.')[0]);\n    }\n  };\n\n  const handleUpload = async () => {\n    if (!file) {\n      setError('Please select a file');\n      return;\n    }\n\n    setIsUploading(true);\n    setUploadProgress(0);\n    setError(null);\n\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('title', title);\n      formData.append('description', description);\n\n      const response = await documentsAPI.upload(formData);\n      setDocument(response.data);\n      setIsUploading(false);\n      setUploadProgress(0);\n      \n      // Auto-analyze after upload\n      analyzeDocument(response.data.id);\n    } catch (err) {\n      console.error('Upload error:', err);\n      setError(err.response?.data?.detail || 'Upload failed');\n      setIsUploading(false);\n      setUploadProgress(0);\n    }\n  };\n\n  const analyzeDocument = async (documentId) => {\n    setIsAnalyzing(true);\n    setError(null);\n\n    try {\n      const response = await documentsAPI.analyze(documentId || document.id, { model: \"colpali\" });\n      setAnalysis(response.data);\n      setActiveTab(0); // Switch to analysis tab\n    } catch (err) {\n      console.error('Analysis error:', err);\n      setError(err.response?.data?.detail || 'Analysis failed');\n    } finally {\n      setIsAnalyzing(false);\n    }\n  };\n\n  const handleSubmitChat = async () => {\n    if (!chatInput.trim() || !document?.id) return;\n    \n    const userQuestion = chatInput.trim();\n    setChatInput('');\n    setIsSubmittingChat(true);\n    \n    // Add user message immediately for better UX\n    setChatMessages(prev => [...prev, {\n      role: 'user',\n      content: userQuestion\n    }]);\n    \n    try {\n      const response = await documentsAPI.chat(document.id, {\n        query: userQuestion,\n        model: \"colpali\"\n      });\n      \n      // Update with full chat history from server\n      setChatMessages(response.data.messages);\n    } catch (err) {\n      console.error('Chat error:', err);\n      setError('Failed to get response. Please try again.');\n      \n      // Add error message to chat\n      setChatMessages(prev => [...prev, {\n        role: 'assistant',\n        content: 'Sorry, I encountered an error processing your question. Please try again.'\n      }]);\n    } finally {\n      setIsSubmittingChat(false);\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmitChat();\n    }\n  };\n\n  const handleCloseError = () => {\n    setError(null);\n  };\n\n  // Update documentsAPI to include chat function\n  if (!documentsAPI.chat) {\n    documentsAPI.chat = (id, data) => {\n      return fetch(`${process.env.REACT_APP_API_URL || 'http://localhost:8000'}/documents/${id}/chat`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      }).then(res => {\n        if (!res.ok) throw new Error('Chat request failed');\n        return res.json().then(data => ({ data }));\n      });\n    };\n  }\n\n  return (\n    <Container maxWidth=\"lg\">\n      <Paper sx={{ p: 3, mt: 4, mb: 4 }}>\n        <Typography variant=\"h5\" gutterBottom>\n          Document Analysis with ColPali\n        </Typography>\n        <Typography variant=\"subtitle2\" color=\"text.secondary\" paragraph>\n          Powered by ColPali Vision Language Model for efficient document retrieval and analysis\n        </Typography>\n\n        {!document ? (\n          // Upload form\n          <Box sx={{ mb: 3 }}>\n            <TextField\n              fullWidth\n              label=\"Document Title\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              margin=\"normal\"\n              disabled={isUploading}\n            />\n            <TextField\n              fullWidth\n              label=\"Description (optional)\"\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              margin=\"normal\"\n              multiline\n              rows={2}\n              disabled={isUploading}\n            />\n            <Box sx={{ mt: 2 }}>\n              <input\n                ref={fileInputRef}\n                accept=\".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png\"\n                style={{ display: 'none' }}\n                id=\"file-upload\"\n                type=\"file\"\n                onChange={handleFileChange}\n                disabled={isUploading}\n              />\n              <Button\n                variant=\"outlined\"\n                component=\"label\"\n                htmlFor=\"file-upload\"\n                startIcon={<CloudUploadIcon />}\n                disabled={isUploading}\n              >\n                Select File\n              </Button>\n              {file && (\n                <Typography variant=\"body2\" sx={{ mt: 1 }}>\n                  Selected: {file.name}\n                </Typography>\n              )}\n            </Box>\n\n            {isUploading && (\n              <Box sx={{ mt: 2 }}>\n                <LinearProgress variant=\"determinate\" value={uploadProgress} />\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n                  Uploading: {uploadProgress}%\n                </Typography>\n              </Box>\n            )}\n\n            <Box sx={{ mt: 2 }}>\n              <Button\n                variant=\"contained\"\n                onClick={handleUpload}\n                disabled={!file || isUploading}\n                startIcon={isUploading ? <CircularProgress size={20} /> : <DescriptionIcon />}\n              >\n                {isUploading ? 'Uploading...' : 'Upload & Analyze'}\n              </Button>\n            </Box>\n          </Box>\n        ) : (\n          // Document analysis and chat\n          <Box sx={{ mt: 3 }}>\n            <Box sx={{ borderBottom: 1, borderColor: 'divider', mb: 2 }}>\n              <Tabs value={activeTab} onChange={handleTabChange} aria-label=\"document tabs\">\n                <Tab icon={<AnalyticsIcon />} label=\"Analysis\" />\n                <Tab icon={<ChatIcon />} label=\"Chat with Document\" />\n              </Tabs>\n            </Box>\n\n            {/* Analysis Tab */}\n            {activeTab === 0 && (\n              <Box>\n                {isAnalyzing ? (\n                  <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', p: 3 }}>\n                    <CircularProgress size={40} />\n                    <Typography variant=\"body1\" sx={{ mt: 2 }}>\n                      Analyzing document with ColPali Vision Language Model...\n                    </Typography>\n                  </Box>\n                ) : analysis ? (\n                  <Grid container spacing={3}>\n                    <Grid item xs={12}>\n                      <Typography variant=\"h6\">Document Summary</Typography>\n                      <Paper elevation={0} variant=\"outlined\" sx={{ p: 2, mt: 1 }}>\n                        <Typography variant=\"body1\">{analysis.summary}</Typography>\n                      </Paper>\n                    </Grid>\n                    \n                    <Grid item xs={12} md={6}>\n                      <Typography variant=\"h6\">Key Points</Typography>\n                      <Paper elevation={0} variant=\"outlined\" sx={{ p: 2, mt: 1 }}>\n                        {analysis.key_points && analysis.key_points.length > 0 ? (\n                          <List dense>\n                            {analysis.key_points.map((point, index) => (\n                              <ListItem key={index}>\n                                <ListItemText primary={point} />\n                              </ListItem>\n                            ))}\n                          </List>\n                        ) : (\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                            No key points identified\n                          </Typography>\n                        )}\n                      </Paper>\n                    </Grid>\n                    \n                    <Grid item xs={12} md={6}>\n                      <Typography variant=\"h6\">Potential Risks</Typography>\n                      <Paper elevation={0} variant=\"outlined\" sx={{ p: 2, mt: 1 }}>\n                        {analysis.risks && analysis.risks.length > 0 ? (\n                          <List dense>\n                            {analysis.risks.map((risk, index) => (\n                              <ListItem key={index}>\n                                <ListItemText primary={risk} />\n                              </ListItem>\n                            ))}\n                          </List>\n                        ) : (\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                            No risks identified\n                          </Typography>\n                        )}\n                      </Paper>\n                    </Grid>\n                    \n                    <Grid item xs={12}>\n                      <Typography variant=\"h6\">Key Entities</Typography>\n                      <Paper elevation={0} variant=\"outlined\" sx={{ p: 2, mt: 1 }}>\n                        {analysis.entities && analysis.entities.length > 0 ? (\n                          <Grid container spacing={1}>\n                            {analysis.entities.map((entity, index) => (\n                              <Grid item key={index}>\n                                <Chip \n                                  label={`${entity.name} (${entity.type})`} \n                                  variant=\"outlined\" \n                                  color={\n                                    entity.type === 'person' ? 'primary' : \n                                    entity.type === 'organization' ? 'secondary' : \n                                    'default'\n                                  }\n                                />\n                              </Grid>\n                            ))}\n                          </Grid>\n                        ) : (\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                            No entities identified\n                          </Typography>\n                        )}\n                      </Paper>\n                    </Grid>\n                  </Grid>\n                ) : (\n                  <Box sx={{ display: 'flex', justifyContent: 'center', p: 3 }}>\n                    <Button\n                      variant=\"contained\"\n                      onClick={() => analyzeDocument()}\n                      disabled={isAnalyzing}\n                      startIcon={isAnalyzing ? <CircularProgress size={20} /> : <AnalyticsIcon />}\n                    >\n                      {isAnalyzing ? 'Analyzing...' : 'Analyze Document'}\n                    </Button>\n                  </Box>\n                )}\n              </Box>\n            )}\n\n            {/* Chat Tab */}\n            {activeTab === 1 && (\n              <Box sx={{ display: 'flex', flexDirection: 'column', height: '60vh' }}>\n                <Paper\n                  elevation={0}\n                  variant=\"outlined\"\n                  sx={{\n                    p: 2,\n                    flexGrow: 1,\n                    overflow: 'auto',\n                    backgroundColor: '#f5f5f5',\n                    mb: 2\n                  }}\n                >\n                  {chatMessages.length === 0 ? (\n                    <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', height: '100%' }}>\n                      <ChatIcon sx={{ fontSize: 60, color: 'text.secondary', mb: 2 }} />\n                      <Typography variant=\"body1\" color=\"text.secondary\">\n                        Ask questions about the document\n                      </Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1, textAlign: 'center', maxWidth: '70%' }}>\n                        ColPali will identify relevant information in the document to answer your questions\n                      </Typography>\n                    </Box>\n                  ) : (\n                    chatMessages.map((msg, index) => (\n                      <Box\n                        key={index}\n                        sx={{\n                          display: 'flex',\n                          justifyContent: msg.role === 'user' ? 'flex-end' : 'flex-start',\n                          mb: 2\n                        }}\n                      >\n                        <Box\n                          sx={{\n                            display: 'flex',\n                            maxWidth: '75%'\n                          }}\n                        >\n                          {msg.role !== 'user' && (\n                            <Avatar sx={{ bgcolor: 'primary.main', mr: 1 }}>AI</Avatar>\n                          )}\n                          <Paper\n                            elevation={1}\n                            sx={{\n                              p: 2,\n                              backgroundColor: msg.role === 'user' ? 'primary.main' : 'background.paper',\n                              color: msg.role === 'user' ? 'white' : 'text.primary',\n                              borderRadius: 2\n                            }}\n                          >\n                            <Typography variant=\"body1\" style={{ whiteSpace: 'pre-line' }}>{msg.content}</Typography>\n                          </Paper>\n                          {msg.role === 'user' && (\n                            <Avatar sx={{ bgcolor: 'secondary.main', ml: 1 }}>U</Avatar>\n                          )}\n                        </Box>\n                      </Box>\n                    ))\n                  )}\n                  <div ref={chatEndRef} />\n                </Paper>\n                \n                <Box sx={{ display: 'flex' }}>\n                  <TextField\n                    fullWidth\n                    variant=\"outlined\"\n                    placeholder=\"Ask a question about the document...\"\n                    value={chatInput}\n                    onChange={(e) => setChatInput(e.target.value)}\n                    onKeyPress={handleKeyPress}\n                    disabled={isSubmittingChat}\n                    sx={{ mr: 1 }}\n                  />\n                  <Button\n                    variant=\"contained\"\n                    onClick={handleSubmitChat}\n                    disabled={!chatInput.trim() || isSubmittingChat}\n                    startIcon={isSubmittingChat ? <CircularProgress size={20} /> : <SendIcon />}\n                  >\n                    Send\n                  </Button>\n                </Box>\n              </Box>\n            )}\n          </Box>\n        )}\n      </Paper>\n\n      <Snackbar \n        open={!!error} \n        autoHideDuration={6000} \n        onClose={handleCloseError}\n        anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\n      >\n        <Alert onClose={handleCloseError} severity=\"error\" sx={{ width: '100%' }}>\n          {error}\n        </Alert>\n      </Snackbar>\n    </Container>\n  );\n};\n\nexport default DocumentAnalysis;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}